<%= render 'alert' %>

<h1 class="text-center"><%= @question.title %>?</h1>
<h4>
  <strong>Detalhes:</strong>
  <%= @question.body %>
</h4>

<h4>
  <strong>Perguntador:</strong>
  <%= @question.user.name %>
</h4>
<% if @question.user == current_user %>
  <%= link_to 'Editar', edit_question_path(@question), class: "btn btn-default" %>
<% end %>

<% if @question.user_id == current_user.id %>
  <h3><strong>Respostas</strong></h3>
  <% @question.answers.each do |answer| %>
  <h3>
    <%= answer.user.name %>
    <% if answer.rating %>
      <%= answer.rating %>
    <% end %>
  </h3>
  <p>
    <%= answer.body %>
  </p>
  <div class="row col-md-6">
    <%= form_tag("/questions/#{@question.id}/answers/#{answer.id}", method: "patch") do %>
    <div class="form-group">
      <p><%= number_field_tag(:rating, in: 1..100, class: "form-control") %></p>
    </div>
    <div class="checkbox">
      <label>
        <%= check_box_tag(:best) %> Melhor resposta?
      </label>
    </div>
    <%= submit_tag("Avaliar", class: "btn btn-default col-xs-4") %>
    <% end %>
  </div>
  <% end %>
  <% else %>
  <% if @myanswer %>
    <% rating = @myanswer.rating %>
    <% body = @myanswer.body %>
  <% end %>
  <h2>Sua reposta:</h2>
  <hr>
  <p><%= rating %></p>
  <%= form_for([@question, @answer]) do |f| %>
    <p>
      <%= f.text_area :body, :value => body, class: "form-control" %>
    </p>
    <p>
      <%= f.submit "Submeter", class: "btn btn-default" %>
    </p>
  <% end %>
<% end %>
